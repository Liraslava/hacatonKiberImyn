#  Отчёт о выполнении задачи "Создание программы для обнаружения повышенного радиационного фона в трубах с паром на атомной электростанции".


## Постановка задачи
Устройство детектирования (УД) обрабатывает входящие сигналы от датчиков, в случае превышения порога срабатывания принимает решение о выдаче команды в систему управления защиты (СУЗ) реактора (автоматическое срабатывание).
Известные ограничения и вводные
Для решения надо использовать микросервисную архитектуру на основе обмена сообщениями - каждый компонент реализуется как микросервис.
В решении должны быть использованы:
Message Bus - шина обмена сообщениями
Kafka message broker (технически kafka + zookeeper). Kafka используется из докер-образа (версия confluentinc/cp-kafka:7.2.0)
Security Monitor (SM) - сервис авторизации запросов все запросы между сервисами проходят через SM, прямой обмен сообщениями между сервисами запрещён по условиям задачи. SM должен содержать в себе описание разрешённых операций и их атрибутов, авторизует или блокирует запрос между сервисами. Данный сервис первым получает все запросы, если проверка безопасности проходит успешно, то монитор извлекает из поля 'deliver_to' имя топика сервиса-получателя и отправляет в него сообщение с добавлением поля 'authorized' и значением true для него. Правила проверки могут быть построены на анализе отправителя, получателя и любых дополнительных полей или условий, на выбор команды.
Сервисы могут быть реализованы на любом языке из списка допустимых в хакатоне.
## Цели и Предположения Безопасности (ЦПБ)
### Цели безопасности
1. Только авторизованный оператор-технолог в присутствии оператора-безопасника может инициировать изменение настроек УД.
2. Только авторизованный оператор-безопасник в присутствии оператора-технолога может обновлять ПО УД.  Разрешено обновление только 1 из 2 УД. Второе УД обновляется только после того, как обновление первого УД показало себя успешно продолжительное количество времени, не менее месяца. 
3. УД выдаёт целостные и достоверные данные во внешние системы с задержкой не более 1 секунды в предположении, что операционная система удовлетворяет требованиям обработки данных в реальном времени.

### Предположения безопасности
- существуют минимум 3 УД для целей отказоустойчивости
- не рассматриваются атаки, связанные с физическим доступом к
оборудованию (например, подмена входных данных; подключение
имитатора УД и т.п.)
- не рассматриваются риски, связанные с физическим отказом внешнего
оборудования, включая обесточивание УД
- не рассматриваются риски, связанные с физическим отказом
аппаратного обеспечения устройства


# Архитектура решения
![plot](https://github.com/Liraslava/hacatonKiberImyn/blob/main/arch.jpg)
![image](https://user-images.githubusercontent.com/84846930/235364175-140c3d35-0288-4afe-b391-602ff3478766.png)

## Компоненты
|Название|Назначение|Комментарий|
|:-------|:---------|:----------|
|Оператор-технолог|управление, настройка уставок (чтение, запись)|  |
|Оператор-безопасник|обновление (запись, выполнение), журнал событий (чтение, очистка)|  |
|АСУ ТП|Автоматизирования система управления техпроцессавми|  |
|СУЗ|выдача команды на активацию  защиты |  |
|УАД|преобразования набора данных в одно результирующее значение|  |
|УАСУД |собирает сигналы с УД для СУЗ| мажоритарный элемент |
|УД|обработка входных сигналов от датчиков|  |
|АД|измерение величины пара и преобразования её в сигнал|  |
|Паропровод|транспортировка пара от места его получения до места использования|  |


## Алгоритм работы решения

### Сценарий 1 Административное срабатывание.
Выдача команды на включение защиты принимается оператором АСУ ТП.

### Сценарий 2 Команда в СУЗ.
Выдача команды на включение защиты принимается УСТРОЙСТВО  АГРЕГАЦИИ  сигнала УД (это может быть мажоритатный элемент) на основе сигналов от большинства ДУ.При выдаче сигнала отправляется уведомление в АСУ ТП. 

### Сценарий 3 События в журнале.
События в журнале пишет только 
Security Monitor УД - часть прошивки УД. Оператор-безопасник  может их читать и стирать. Редактировать не может.

### Сценарий 4 обновление.
Для процедуры обновления прошивки УД авторизованный оператор-технолог в присутствии оператора-безопасника оба отправляют запрос на обновление прошивки УД.  
Security Monitor заносит все запросы  об обновлении прошивки в журнал.
Дополнительно запрос об обновлении Security Monitor отправляет уведомление в АСУ ТП для фиксации запроса вне журнала и предотвращения его удаления из журнала. В ответ АСУТП рассылает всем УД квитанцию о появлении в системе УДт для предотвращения обновления прошивок остальных УД.
Выполнение обновления в любой момент времени происходит только на 1 УД. Этот УД назначается тестовым (УДт) и поступающие с него данные при работе имеют меньший приоритет.
Security Monitor УД запрещает обновление УД при существовании в системе УДт. 
Процедура  признания прошивки доверенной и перевода УД из статуса УДт в статус обычного УД выходит за рамки  данного решения. 

## Описание cценариев (последовательности выполнения операций), при которых ЦБ нарушаются.
### 1. Обновление происходит больше чем на 1 УД
![plot](https://github.com/Liraslava/hacatonKiberImyn/blob/main/upd-more-1.jpg)
![image](https://user-images.githubusercontent.com/84846930/235364206-81a26126-b49e-498c-b613-054c8f2051c7.png)

